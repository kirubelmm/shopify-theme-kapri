<div
  id="Banner-{{ section.id }}"
  class="
    email-signup-banner
    banner
    flex
    flex-col
    relative
    isolate
    content-align-{{ section.settings.desktop_content_alignment }}
    content-align-mobile-{{ section.settings.mobile_content_alignment }}
    banner--{{ section.settings.image_height }}
    {% if section.settings.image_height == 'adapt-image' and section.settings.image != blank %} banner--adapt {% endif %}
    {% if section.settings.show_text_below %} banner--mobile-bottom {% endif %}
    {% if section.settings.show_text_box == false %} bg-transparent {% endif %}
    {% if section.settings.show_background_image %}
      bg-cover bg-center
    {% endif %}
  "
>
  {% if section.settings.show_background_image %}
    <div class="absolute banner__media {% if section.settings.image != blank %}media{% endif %}">
      {% if section.settings.image != blank %}
        <img
          srcset="
            {% if section.settings.image.width >= 375 %}{{ section.settings.image | image_url: width: 375 }} 375w,{% endif %}
            {% if section.settings.image.width >= 750 %}{{ section.settings.image | image_url: width: 750 }} 750w,{% endif %}
            {% if section.settings.image.width >= 1100 %}{{ section.settings.image | image_url: width: 1100 }} 1100w,{% endif %}
            {% if section.settings.image.width >= 1500 %}{{ section.settings.image | image_url: width: 1500 }} 1500w,{% endif %}
            {% if section.settings.image.width >= 1780 %}{{ section.settings.image | image_url: width: 1780 }} 1780w,{% endif %}
            {% if section.settings.image.width >= 2000 %}{{ section.settings.image | image_url: width: 2000 }} 2000w,{% endif %}
            {% if section.settings.image.width >= 3000 %}{{ section.settings.image | image_url: width: 3000 }} 3000w,{% endif %}
            {% if section.settings.image.width >= 3840 %}{{ section.settings.image | image_url: width: 3840 }} 3840w,{% endif %}
            {{ section.settings.image | image_url }} {{ section.settings.image.width }}w
          "
          sizes="100vw"
          src="{{ section.settings.image | image_url: width: 1500 }}"
          loading="lazy"
          alt="{{ section.settings.image.alt | escape }}"
          class="w-full h-auto"
          height="600"
          width="800"
        >
      {% else %}
        {{ 'email-signup-banner-background.svg' | inline_asset_content }}
        {{ 'email-signup-banner-background-mobile.svg' | inline_asset_content }}
      {% endif %}
    </div>
  {% endif %}

  <div class=" banner__content flex items-center justify-center w-full z-20 p-4 md:p-20">
    <div
      class="
        email-signup-banner__box
        newsletter
        newsletter__wrapper
        isolate
        {% if section.settings.show_background_image == false %} bg-transparent {% endif %}
        content-container
        color-{{ section.settings.color_scheme }}
        gradient
        w-full
        max-w-4xl
        mx-auto
        px-6
        py-16
      "
    >
      {% for block in section.blocks %}
        {% case block.type %}
          {% when 'heading' %}
            <h2
              class="email-signup-banner__heading {{ block.settings.header_font }} text-center"
              {{ block.shopify_attributes }}
            >
              {{ block.settings.heading | escape }}
            </h2>

          {% when 'paragraph' %}
            <div
              class="newsletter__subheading mb-8 rte escription_font {{ block.settings.text_style }} text-center mt-2"
              {{ block.shopify_attributes }}
            >
              {{ block.settings.text }}
            </div>

          {% when 'email_form' %}
            <div class="" {{ block.shopify_attributes }}>
              {% form 'customer', class: 'newsletter-form  items-center  ' %}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <div class="newsletter-form__field-wrapper max-w-sm mx-auto  ">
                  <div class="field relative w-full  ">
                    <input
                      id="NewsletterForm--{{ section.id }}"
                      type="email"
                      name="contact[email]"
                      class="field__input w-full px-4 py-2 border mb-4 border-gray-300 focus:outline-none focus:ring-2 focus:ring-black"
                      value="{{ form.email }}"
                      aria-required="true"
                      autocorrect="off"
                      autocapitalize="off"
                      autocomplete="email"
                      {% if form.errors %}
                        autofocus
                        aria-invalid="true"
                        aria-describedby="Newsletter-error--{{ section.id }}"
                      {% elsif form.posted_successfully? %}
                        aria-describedby="Newsletter-success--{{ section.id }}"
                      {% endif %}
                      placeholder="{{ 'newsletter.label' | t }}"
                      required
                    >
                    <button
                      type="submit"
                      class="newsletter-form__button py-2 px-4 flex justify-center w-full bg-black bg-opacity-85 hover:bg-opacity-100 text-white  hover:bg-black focus:outline-none focus:ring-2 focus:ring-blue-500"
                      name="commit"
                      id="Subscribe"
                      aria-label="{{ 'newsletter.button_label' | t }}"
                    >
                      Subscribe
                    </button>

                    <label class="field__label absolute left-4 top-2 hidden" for="NewsletterForm--{{ section.id }}">
                      {{ 'newsletter.label' | t }}
                    </label>
                  </div>

                  {% if form.errors %}
                    <small
                      class="newsletter-form__message form__message mt-2 text-red-500"
                      id="Newsletter-error--{{ section.id }}"
                    >
                      <span class="svg-wrapper">
                        {{ 'icon-error.svg' | inline_asset_content }}
                      </span>
                      {{ form.errors.translated_fields.email | capitalize }}
                      {{ form.errors.messages.email }}
                    </small>
                  {% endif %}
                </div>

                {% if form.posted_successfully? %}
                  <h3
                    class="newsletter-form__message newsletter-form__message--success form__message mt-4 text-green-500"
                    id="Newsletter-success--{{ section.id }}"
                    tabindex="-1"
                    autofocus
                  >
                    <span class="svg-wrapper">
                      {{ 'icon-success.svg' | inline_asset_content }}
                    </span>
                    {{ 'newsletter.success' | t }}
                  </h3>
                {% endif %}
              {% endform %}
            </div>
        {% endcase %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.email-signup-banner.name",
  "tag": "section",
  "class": "section",
  "enabled_on": {
    "templates": ["password"]
  },
  "settings": [],
  "blocks": [
    {
      "type": "heading",
      "name": "t:sections.email-signup-banner.blocks.heading.name",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "default": "Coming Soon",
          "label": "t:sections.email-signup-banner.blocks.heading.settings.heading.label"
        },
        {
          "type": "select",
          "id": "header_font",
          "label": "Font Size",
          "default": "text-2xl",
          "options": [
            {
              "value": "text-xl",
              "label": "Small"
            },
            {
              "value": "text-2xl",
              "label": "Medium"
            },
            {
              "value": "text-3xl",
              "label": "Large"
            }
          ]
        }
      ]
    },
    {
      "type": "paragraph",
      "name": "t:sections.email-signup-banner.blocks.paragraph.name",
      "limit": 1,
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "t:sections.email-signup-banner.blocks.paragraph.settings.paragraph.default",
          "label": "Subscribe for the latest news and updates"
        },

        {
          "type": "select",
          "id": "description_font",
          "label": "Description Font Size",
          "default": "text-md",
          "options": [
            {
              "value": "text-md",
              "label": "Small"
            },
            {
              "value": "text-lg",
              "label": "Medium"
            },
            {
              "value": "text-xl",
              "label": "Large"
            }
          ]
        }
      ]
    },
    {
      "type": "email_form",
      "name": "t:sections.email-signup-banner.blocks.email_form.name",
      "limit": 1
    }
  ],
  "presets": [
    {
      "name": "t:sections.email-signup-banner.presets.name",
      "blocks": [
        {
          "type": "heading"
        },
        {
          "type": "paragraph"
        },
        {
          "type": "email_form"
        }
      ]
    }
  ]
}
{% endschema %}
